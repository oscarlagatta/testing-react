[{"content":"# Query  Functions\n\nAll query functions are accessed through the `screen` object in a test.  These query functions *always* begin with one of the following names: `getBy`, `getAllBy`, `queryBy`, `queryAllBy`, `findBy`, `findAllBy`. \n\n| Start of Function Name | Examples                             |\n|------------------------|--------------------------------------|\n| getBy                  | getByRole, getByText                 |\n| getAllBy               | getAllByText, getByDisplayValue      |\n| queryBy                | queryByDisplayValue, queryByTitle    |\n| queryAllBy             | queryAllByTitle, queryAllByText      |\n| findBy                 | findByRole, findBytext               |\n| findAllBy              | findAllByText, findAllByDisplayValue |\n\nThese names indicate the following:\n\n1. Whether the function will return an element or an array of elements\n2. What happens if the function finds 0, 1, or > 1 of the targeted element\n3. Whether the function runs instantly (synchronously) or looks for an element over a span of time (asynchronously)\n\n\n### Looking for a Single Element?\n\n| Name    | 0 matches | 1 match | > 1 match | Notes                                          |\n|---------|-----------|---------|-----------|------------------------------------------------|\n| getBy   | Throw     | Element | Throw     |                                                |\n| queryBy | null      | Element | Throw     |                                                |\n| findBy  | Throw     | Element | Throw     | Looks for an element over the span of 1 second |\n\n\n### Looking for Multiple Elements?\n\n| Name       | 0 matches | 1 match   | > 1 match | Notes                                        |\n|------------|-----------|-----------|-----------|----------------------------------------------|\n| getAllBy   | Throw     | []Element | []Element |                                              |\n| queryAllBy | [ ]       | []Element | []Element |                                              |\n| findAllBy  | Throw     | []Element | []Element | Looks for elements over the span of 1 second |\n\n\n### When to use each\n\n| Goal of test                           | Use                 |\n|----------------------------------------|---------------------|\n| Prove an element exists                | getBy, getAllBy     |\n| Prove an element does **not** exist        | queryBy, queryAllBy |\n| Make sure an element eventually exists | findBy, findAllBy   |","type":"text","id":"12frm"},{"content":"import {render, screen} from '@testing-library/react';\n\nfunction ColorList() {\n  return (\n    <ul> ---- 'list'\n      <li>Red</li> --- 'listitem'\n      <li>Blue</li> --- 'listitem'\n      <li>Green</li> --- 'listitem'\n    </ul>\n    // --- 'textbox'\n\n  )\n}\n\nrender(<ColorList />);","type":"code","id":"igdrq"},{"content":"test('getBy, queryBy, findBy, finding 0 elements', async () => {\n  // getByRole! getByText\n  // queryByRole! queryByText queryByDisplayValue\n  // findByRole\n\n  render(<ColorList />);\n\n  // screen.getByRole('textbox');\n  // find a role that doesnt exist will throw an error\n  expect(()=> screen.getByRole('textbox')).toThrow();\n\n  expect(screen.queryByRole('textbox')).toEqual(null);\n\n  let errorThrown = false;\n\n  try {\n    await screen.findByRole('textbox'); // async after 1 second will throw error\n  } catch(err) {\n    errorThrown = true;\n  }\n  expect(errorThrown).toEqual(true);\n\n})","type":"code","id":"1bcbk"},{"content":"test('getBy, queryBy, findBy, finding 1 element', async () => {\n\n  render(<ColorList />);\n\n  expect(\n    screen.getByRole('list')\n  ).toBeInTheDocument();\n\n  expect(\n    screen.queryByRole('list')\n  ).toBeInTheDocument();\n\n  expect(\n    await screen.findByRole('list')\n  ).toBeInTheDocument();\n\n\n\n\n});","type":"code","id":"16e8h"},{"content":"test('getBy, queryBy, findBy, finding > 1 element', async () => {\n\n  render(<ColorList />);\n\n  \n  expect(()=> screen.getByRole('listitem')).toThrow();\n\n  expect(() => screen.queryByRole('listitem')).toThrow();\n\n  let errorThrown = false;\n\n  try {\n    await screen.findByRole('listitem'); // async after 1 second will throw error\n  } catch(err) {\n    errorThrown = true;\n  }\n  expect(errorThrown).toEqual(true);\n\n})","type":"code","id":"0rv8x"},{"content":"test('getAllBy, queryAllBy, findAllBy', async () => {\n\n  render(<ColorList />);\n\n  expect(screen.getAllByRole(\"listitem\")).toHaveLength(3);\n  expect(screen.queryAllByRole('listitem')).toHaveLength(3);\n  expect(\n    await screen.findAllByRole('listitem')\n  ).toHaveLength(3);\n})","type":"code","id":"9syid"},{"content":"test('favor using getBy to prove an element exists', async () => {\n  render(<ColorList />);\n\n  const element = screen.getByRole('list');\n\n  expect(element).toBeInTheDocument();\n})","type":"code","id":"78a2c"},{"content":"test('favor using queryBy to prove an element does not exists', async () => {\n  render(<ColorList />);\n\n  const element = screen.queryByRole('textbox');\n\n  expect(element).not.toBeInTheDocument();\n})","type":"code","id":"q39bi"},{"content":"import { useState, useEffect} from 'react';\n\nfunction fakeFetchColors() {\n  return Promise.resolve(\n    ['red', 'green', 'blue']\n  );\n}\n\nfunction LoadableColorList() {\n  const [colors, setColors] = useState([]);\n\n  useEffect(() => {\n    fakeFetchColors()\n      .then(c => setColors(c))\n  }, []);\n\n  const renderedColors = colors.map(color => {\n    return <li key={color}>{color}</li>\n  });\n\n  return (\n    <ul>{renderedColors}</ul>\n  )\n}\n\nrender(<LoadableColorList />)","type":"code","id":"o6wgn"},{"content":"test('favor using findBy or findByAllBy to prove an element eventually exists', async () => {\n  render(<LoadableColorList />);\n\n  const els = await screen.findAllByRole('listitem');\n\n  expect(els).toHaveLength(3);\n})","type":"code","id":"swa1d"}]